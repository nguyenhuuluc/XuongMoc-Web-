@{
    Layout = "~/Areas/admin/views/shared/_Layout.cshtml";
}

<div class="box box-primary">
    <div class="box-header with-border">
        <h3 class="box-title">Add / Edit Product</h3>
    </div>
    <!-- /.box-header -->
    <!-- form start -->
    <form role="form">
        <div class="box-body">
            <input type="number" id="id" hidden="hidden" />
            <div class="form-group">
                <label for="name">Name</label>
                <input type="text" class="form-control" id="name" placeholder="Enter name">
            </div>
            <div class="form-group">
                <label for="price">Price</label>
                <input type="text" class="form-control" id="price" placeholder="Price">
            </div>
            <div class="form-group">
                <label for="description">Description</label>
                <input type="text" class="form-control" id="description" placeholder="Description">
            </div>
            <div class="form-group">
                <label for="image">Image</label>
                <input type="text" class="form-control" id="image" placeholder="Image">
            </div>
            <div class="form-group">
                <label for="chatlieu">ChatLieu</label>
                <input type="text" class="form-control" id="chatlieu" placeholder="ChatLieu">
            </div>
            <div class="form-group">
                <label for="kichthuoc">KichThuoc</label>
                <input type="text" class="form-control" id="kichthuoc" placeholder="KichThuoc">
            </div>
            <div class="form-group">
                <label for="mausacban">MauSacBan</label>
                <input type="text" class="form-control" id="mausacban" placeholder="MauSacBan">
            </div>
            <div class="form-group">
                <label for="baohanh">BaoHanh</label>
                <input type="text" class="form-control" id="baohanh" placeholder="BaoHanh">
            </div>
        </div>
        <!-- /.box-body -->

        <div class="box-footer">
            <button type="submit" onclick="add()" class="btn btn-primary">Add</button>
        </div>
    </form>
</div>

@section Scripts
{
        <script>
            function add() {
            let id = $('#id').val();
            let obj = {
                    Id: id ? id : 0,
                    Name: $('#name').val(),
                    Price: $('#price').val(),
                    Description: $('#description').val(),
                    Image: $('#image').val(),
                    ChatLieu: $('#chatLieu').val(),
                    KichThuoc: $('#kichThuoc').val(),
                    MauSacBan: $('#mauSacBan').val(),
                    BaoHanh: $('#baoHanh').val()
                }
                $.ajax({
                    url: "/admin/home/add",
                    type: "POST",
                    contentType: "application/json",
                    data: JSON.stringify(obj),
                    beforeSend: function () {
                        console.log("loading...");
                    },
                    success: function (res) {
                        window.location.replace("https://localhost:7235/admin/home/index");
                    },
                    error: function (err) {
                        console.log(err);
                    }
                })
            }

            function edit(id) {
                let cate = lstcate.find(x => x.id == id);
                if (cate) {
                    $('#id').val(cate.id);
                    $('#name').val(cate.name);
                    $('#price').val(cate.price);
                    $('#description').val(cate.description);
                    $('#image').val(cate.image);
                    $('#chatlieu').val(cate.chatLieu);
                    $('#kichthuoc').val(cate.kichThuoc);
                    $('#mausacban').val(cate.mauSacBan);
                    $('#baohanh').val(cate.baoHanh);
                }
            }
        </script>
}             